---
const { title, btnId, btnTitle, url } = Astro.props;

interface Props {
  title?: string;
  btnId: string;
  btnTitle: string;
  url: string;
}
---

<astro-banner btnId={btnId}>
  <div
    class="fixed bottom-0 start-1/2 z-50 w-full -translate-x-1/2 transform p-2 sm:max-w-2xl sm:p-4 lg:max-w-4xl"
    role="region"
    aria-label="Informational Banner"
  >
    <div
      class="mx-auto rounded-xl bg-gradient-to-r from-[#3A73C1]/90 to-[#6FAFD6]/90 backdrop-blur-xl border border-white/20 px-3 py-2.5 text-center shadow-lg dark:from-[#3A73C1]/80 dark:to-[#7ECBC2]/80 dark:border-white/10 sm:rounded-2xl sm:px-6 sm:py-3.5 lg:rounded-3xl lg:px-10 lg:py-4"
      style="box-shadow: 0 8px 32px rgba(58, 115, 193, 0.15);"
    >
      <div class="relative flex items-center justify-center gap-2 pr-6 sm:gap-4 sm:pr-8 lg:pr-10">
        <div class="flex flex-1 flex-col items-center gap-2 sm:flex-row sm:justify-center sm:gap-4 lg:gap-5">
          {title &&
          <p
            class="text-xs font-medium text-white/95 leading-tight sm:text-sm lg:text-base"
          >
            {title}
          </p>
          }
          <a
            class="group inline-flex items-center gap-x-1.5 rounded-full bg-white/95 backdrop-blur-sm px-3.5 py-1.5 text-xs font-semibold text-[#3A73C1] transition-all duration-300 hover:bg-white hover:scale-[1.02] hover:shadow-md active:scale-[0.98] disabled:pointer-events-none disabled:opacity-50 sm:gap-x-2 sm:px-5 sm:py-2 sm:text-sm lg:px-7 lg:py-2.5 lg:text-base"
            href={url}
          >
            {btnTitle}
            <svg
              class="size-2.5 shrink-0 transition duration-300 group-hover:translate-x-0.5 sm:size-3.5 sm:group-hover:translate-x-1 lg:size-4"
              width="16"
              height="16"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2.5"
              stroke-linecap="round"
              stroke-linejoin="round"><path d="m9 18 6-6-6-6"></path></svg
            >
          </a>
        </div>
        <button
          type="button"
          class="absolute right-2 top-2 flex h-5 w-5 items-center justify-center rounded-full bg-white/10 text-white/70 transition duration-300 hover:bg-white/20 hover:text-white active:scale-95 disabled:pointer-events-none disabled:opacity-50 sm:h-6 sm:w-6 sm:right-3 sm:top-3"
          id={btnId}
          aria-label="Fermer"
        >
          <span class="sr-only">Dismiss</span>
          <svg
            class="size-2.5 shrink-0 sm:size-3"
            width="16"
            height="16"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
            ><path d="M18 6 6 18"></path><path d="m6 6 12 12"></path></svg
          >
        </button>
      </div>
    </div>
  </div>
</astro-banner>
<script>
  class AstroBanner extends HTMLElement {
    connectedCallback() {
      const btnId = this.getAttribute("btnId");
      const button = this.querySelector(`#${btnId}`);
      if (button != null) {
        button.addEventListener("click", () => this.remove());
      }
    }
  }

  customElements.define("astro-banner", AstroBanner);
</script>
